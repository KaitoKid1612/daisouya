# --料金体系の仕様--

- 通常期
```
(システム利用料 + 緊急依頼料金 + 運賃 - 値引き額 ) * 1.1[消費税分]
```
- 繁忙日
```
(システム利用料(繁忙日) + 緊急依頼料金 + 運賃 - 値引き額 ) * 1.1[消費税分]
```

- 無料ユーザーの値引き額
```
値引き額 = (システム利用料 + 緊急依頼料金 + 運賃) 
```

ライトプランのシステム利用料(繁忙期)。運賃によって定数が変わります。
```
システム利用料 = 運賃 * 定数/100 
```
参考: [app/Libs/Price/DriverTaskPriceSupport.php](app/Libs/Price/DriverTaskPriceSupport.php)


- ドライバーは自身のドライバープランに対応する、稼働依頼のプランのみ受諾できるか。
この関係性はdriver_task_plan_allow_drivers テーブルを確認してください。

- プレミアムかライトプランかスタンダードかを、依頼者が稼働依頼時に選択する。

# プラン
## プレミアムプラン
システム利用料: 10,000円(管理画面設定)  
緊急依頼料金: 20,000円(管理画面設定)  
運賃: 依頼者任意で決める(1円単位)(依頼者設定)  
依頼できるドライバー: プレミアムDR  
- 管理画面でシステム利用料は数値入力

## ライトプラン:
システム利用料: 10,000円 + ドライバー運賃の20%(繁忙期: 2万円以上は30%、繁忙期は2万円以下は40%)(管理画面設定)  
緊急依頼料金: 無料 (管理画面設定)  
運賃: 依頼者任意で決める(1円単位)(依頼者設定)  
依頼できるドライバー: プレミアムドライバー、スタンダードドライバー、ライトドライバー  
- 管理画面で料金(%)は選択できるようにする。システム利用料金がドライバー運賃の何%増しになるかは、管理画面で設定する。料金変動制では無く依頼金額の20%~40% (繁忙期は2万円以下は40%、 2万円以上は30%)(管理画面設定) 

## スタンダートプラン (自社登録有)
システム利用料: 最安3,000円 (繁忙期は最安6,000円)(管理画面設定)  
緊急依頼料金: 無料(管理画面設定)  
運賃: 依頼者任意で決める(1円単位)(依頼者設定)  
依頼できるドライバー: プレミアムドライバー、スタンダードドライバー
- 管理画面でシステム利用料は数値入力

- 通常期、繁忙期によって、料金が変わる。どの期かの日程は管理画面のカレンダーで設定する。
- プレミアムDR、スタンダードDR、ライトDR かは 会員登録申請時に管理者が選択する。現在の会員のドライバーは、管理画面で設定する。
- プランを指定して、稼働依頼をする。受諾する条件に適合したドライバーのみが受諾することがきる。
- ドライバーが〇〇ドライバーになるかは、管理画面で設定する。

# --言葉の定義--
自社DR: ksring所属のドライバー  
自社登録済ドライバー: 自社内での、登録や研修が終わっているドライバー  
システム利用料: 依頼者が払う料金であり、管理者の利益。  
通常個建運賃(ドライバー運賃): 依頼者が支払う料金であり、ドライバーの利益。  
ミニマム: 稼働依頼の最安価格のこと。  
緊急依頼料金: 旧 直前依頼料金  
システム料: 旧 基本料金 管理者の利益。  
プレミアムドライバー: どのプランも受けられる。  
スタンダードドライバー: スタンダード、ライトプランの受諾可能。  
ライトドライバー: ライトプランのみ受諾可能。  

- 参考
https://drive.google.com/file/d/12AZIpeW_IX4O8qTwyGK4AqB3L2Ob5chF/view?usp=drive_link